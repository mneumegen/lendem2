---
import ListItem from "./ListItem.astro";

const {
  items = [],
  direction = "vertical",
  alignX = "start",
  size = "md",
  class: className,
  "data-prop": customDataProp = "items",
  editable = true,
  ...restProps
} = Astro.props;

const htmlAttributes = Object.fromEntries(
  Object.entries(restProps).filter(([key]) => key !== "_component")
);

const arrayDataAttributes = editable
  ? {
      "data-editable": "array",
      "data-prop": customDataProp,
      "data-component-key": "_component",
      "data-id-key": "_component",
    }
  : {};
---

<ul
  class:list={["list", `size-${size}`, `direction-${direction}`, `alignment-${alignX}`, className]}
  role="list"
  {...arrayDataAttributes}
  {...htmlAttributes}
>
  {
    items ? (
      items.map((item: any) => (
        <editable-array-item data-component="building-blocks/core-elements/list/list-item">
          <ListItem
            text={item.text}
            iconName={item.iconName}
            iconColor={item.iconColor}
            editable={editable}
          />
        </editable-array-item>
      ))
    ) : (
      <slot />
    )
  }
</ul>

<style lang="pcss">
  .list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-em-sm);
    list-style: none;
    margin: 0;
    margin-top: var(--spacing-lg);
    padding: 0;

    &.direction-horizontal {
      flex-flow: row wrap;
      gap: var(--spacing-em-sm);
    }

    &.alignment-end {
      align-items: flex-end;
      justify-content: flex-end;
    }

    &.alignment-center {
      align-items: center;
      justify-content: center;
    }

    &.size-xs {
      font-size: var(--font-size-xs);
    }

    &.size-sm {
      font-size: var(--font-size-sm);
    }

    &.size-md {
      font-size: var(--font-size-md);
    }

    &.size-lg {
      font-size: var(--font-size-lg);
    }

    &.size-xl {
      font-size: var(--font-size-xl);
    }

    &.size-2xl {
      font-size: var(--font-size-2xl);
    }
  }
</style>
