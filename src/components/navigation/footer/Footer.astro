---
import CustomSection from "@builders/custom-section/CustomSection.astro";
import Bar from "@components/navigation/bar/Bar.astro";
import Button from "@core-elements/button/Button.astro";
import Divider from "@core-elements/divider/Divider.astro";
import Image from "@core-elements/image/Image.astro";
import Text from "@core-elements/text/Text.astro";
import ButtonGroup from "@wrappers/button-group/ButtonGroup.astro";

const {
  links = [],
  socials = [],
  footerText = "",
  logoSource,
  logoAlt,
  ...htmlAttributes
} = Astro.props;
---

<footer class="footer" {...htmlAttributes}>
  <CustomSection
    maxContentWidth="2xl"
    paddingHorizontal="md"
    paddingVertical="2xl"
    backgroundColor="accent"
    colorScheme="contrast"
  >
    <div class="footer-content">
      <Image source={logoSource} alt={logoAlt} class="footer-logo" editable={false} />
      <div class="content-container footer-links">
        <Bar navData={links} />
        <ButtonGroup alignX="end">
          {
            socials.map((social: any) => (
              <Button
                variant="ghost"
                size="lg"
                iconName={social.icon}
                link={social.link}
                hideText="true"
                aria-label={`Visit our ${social.icon} page`}
                target="_blank"
                rel="noopener noreferrer"
              />
            ))
          }
        </ButtonGroup>
      </div>
    </div>

    <Divider />

    <div class="footer-content">
      <div class="content-container">
        <Text class="footer-legal-text" text={footerText || ""} data-prop="" />
      </div>
      <div class="content-container">
        <Image
          source="/src/assets/images/soc2.png"
          alt="SOC 2"
          class="footer-soc2-logo"
          editable={false}
        />
      </div>
    </div>
  </CustomSection>
</footer>

<style lang="pcss">
  .footer {
    container-type: inline-size;

    .button-group {
      &.align-end {
        @container (max-width: 599px) {
          justify-content: center;
        }
      }
    }

    @media (--from-sm) {
      .footer-links {
        display: flex;
        flex-direction: row;
        justify-content: end;
        gap: var(--spacing-md);
        align-items: center;
        nav {
          flex: 1;
        }

        .button-group {
          margin-top: 0 !important;
          width: auto !important;
          margin-left: 1rem;
        }
      }
    }

    .footer-content {
      @container (min-width: 600px) {
        align-items: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
      }

      .content-container {
        flex: 1;
      }
    }

    .footer-legal-text {
      color: var(--color-text-muted);
      text-align: center;
      @container (min-width: 600px) {
        text-align: start;
      }
    }

    .footer-logo {
      flex-shrink: 0;
      margin-top: 0 !important;

      :global(img) {
        margin-inline: auto;
        margin-bottom: var(--spacing-md);
        max-width: 150px;
        width: auto;
        @container (min-width: 600px) {
          margin: 0;
        }
      }
    }

    .footer-soc2-logo {
      flex-shrink: 0;
      margin-top: 0 !important;
      max-width: 100px;
      width: auto;
      display: flex;
      margin-inline-start: auto;
    }

    :global(.bar .bar-list) {
      flex-flow: column wrap;
      @container (min-width: 600px) {
        flex-direction: row;
        justify-content: end;
      }
    }
  }
</style>
