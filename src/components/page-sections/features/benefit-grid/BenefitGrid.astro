---
import CustomSection from "@builders/custom-section/CustomSection.astro";
import Heading from "@core-elements/heading/Heading.astro";
import SimpleText from "@core-elements/simple-text/SimpleText.astro";
import Text from "@core-elements/text/Text.astro";
import BenefitItem from "@features/benefit-grid/BenefitItem.astro";
import ButtonGroup from "@wrappers/button-group/ButtonGroup.astro";
import Card from "@wrappers/card/Card.astro";
import Grid from "@wrappers/grid/Grid.astro";
import GridItem from "@wrappers/grid/GridItem.astro";

const {
  eyebrow = "",
  heading = "",
  subtext = "",
  features = [],
  colorScheme,
  backgroundColor,
  paddingVertical = "4xl",
  class: className,
  buttonSections = [],
} = Astro.props;
---

<CustomSection
  class:list={["benefit-grid", className]}
  maxContentWidth="2xl"
  paddingHorizontal="lg"
  paddingVertical={paddingVertical}
  colorScheme={colorScheme}
  backgroundColor={backgroundColor}
>
  <Card
    class="benefit-grid-card"
    backgroundColor="wave"
    colorScheme="contrast"
    paddingHorizontal="lg"
    paddingVertical="xl"
    rounded
  >
    {
      eyebrow && (
        <SimpleText alignX="center" class="benefit-grid-eyebrow" data-prop="eyebrow">
          {eyebrow}
        </SimpleText>
      )
    }
    {
      heading && (
        <Heading level="h2" alignX="center" data-prop="heading">
          {heading}
        </Heading>
      )
    }
    {
      subtext && (
        <Text class="benefit-grid-subtext" alignX="center" data-prop="subtext" text={subtext} />
      )
    }
    {
      features?.length > 0 && (
        <Grid
          gap="lg"
          minItemWidth="320"
          maxItemWidth="360"
          style="margin-top: var(--spacing-2xl)"
          data-prop="features"
          class="benefit-grid-items"
        >
          {features.map((feature, index) => (
            <GridItem>
              <editable-array-item data-component="page-sections/features/benefit-grid/benefit-item">
                <BenefitItem {...feature} class="benefit-grid-item" data-index={index} />
              </editable-array-item>
            </GridItem>
          ))}
        </Grid>
      )
    }

    {
      buttonSections?.length > 0 && (
        <ButtonGroup
          class="benefit-grid-buttons"
          buttonSections={buttonSections}
          direction="row"
          alignX="center"
        />
      )
    }
  </Card>
</CustomSection>

<style lang="pcss">
  .benefit-grid-items {
    
    @container (max-width: 1020px) {
      > :global(editable-array-item),
      > :global(.grid-item) {
        flex-basis: 100% !important;
        max-width: 100% !important;
      }
    }
  }

  .benefit-grid-buttons {
    margin-top: var(--spacing-3xl);
  }

  .benefit-grid-eyebrow {
    color: #A1D5FF;
    font-weight: 400;
    font-size: 20px !important;
  }

  .benefit-grid-card > :global(.outer-content) > :global(.content) {
    padding-top: 4rem !important;
  }
</style>
